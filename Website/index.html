<!DOCTYPE html>



<head>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="./static/js/logic.js"></script>
  <html lang="en">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Market Sentiment</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <style>
    body {
      background-color: rgb(56, 57, 61);
      color: black;
    }

    #site-description {
      margin: 20px;
    }

    /* Style for buttons */
    .btn-custom {
      background-color: white;
      color: black;
      border-color: blue;
    }

    .btn-custom.active {
      background-color: blue;
      color: white;
      border-color: blue;
    }
    
    /* Custom styles for the table */
    .custom-table {
      background-color: black;
      color: white;
      border-color: white;
    }

    /* Set a fixed width for the table */
    .table-fixed-width {
      width: 400px; /* Adjust the width as per your preference */
      margin: 0; /* Remove default margin */
    }

    /* Position the table to the left corner */
    .container {
      width: 100%; /* Full width of the viewport */
      padding: 0 20px; /* Adjust as needed */
    }

    /* Bottom right section */
    .article-section {
      bottom: 10px;
      right: 10px;
      background-color: white;
      color: black;
      padding: 10px;
      border-radius: 5px;
      height: 400px;
      overflow-y: auto;
      margin-top: 20px; /* Added margin-top to create space below the table */
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
    }

    .container1 {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .container2 {
      flex: 2;
      display: flex;
      margin-top: 0px;
      margin-left: 320px;
    }
  

    .container3 {
      flex: 1;
      margin-top: 20px;
      margin-left: 290px;
      
    }

      /* Style for the article list images */
    #article-list li {
      display: flex; /* Use flexbox for layout */
      align-items: flex-start; /* Align items to the top */
      margin-bottom: 20px; /* Add margin for spacing between items */
    }

    #article-list img {
      max-width: 15%; /* Set maximum width for images */
      height: 15%; /* Maintain aspect ratio */
      margin-right: 20px; /* Add margin between image and text */
    }

    #article-list h4,
    #article-list p,
    #article-list a {
      margin: 0; /* Remove default margin for text elements */
    }

 

  </style>
</head>

<body>

  




  <div class="container1">
    <div class="row">
      <div class="col-md-12 jumbotron text-center" style="margin-top: 20px; padding: 10px;">
        <h1>Market Sentiment vs </h1>
        <!-- Summary of the dashboard -->
        <p style="margin-bottom: 10px;">This project will help find the sentiment in selected years in the financial market.</p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">
        <!-- <div class="well">
          <h5>Significant Financial Years:</h5> -->
          <!--Replace "selDataset" with name of actual data set to pull from-->
          <!-- <select id="selDataset" onchange="optionChanged(this.value)"></select>
        </div> -->
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title">Tickers</h3>
          </div>
          <div id="sample-metadata" class="panel-body">
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('AAL')">AAL</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('COST')">COST</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('DAL')">DAL</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('WMT')">WMT</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('SP500')">S&P500</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('NASDAQ')">NASDAQ</button>
            <button class="btn btn-custom btn-sm" onclick="handleButtonClick(this); optionChanged('NYSE')">NYSE</button>
          </div>
        </div>
      </div>
      
      <!-- Container for the Historic 12-Month Run graph -->
      <div class="container2">
        <div class="row">
          <div id="Historic_12_Month_Run" class="top-right-section" style="width: 1200px; height: 350px;"></div>
          <div id="volumeChart" style="width: 1200px; height: 350px;"></div>
          <button class="btn btn-custom btn-sm time-button" onclick="handleButtonClick(this); updateGraph('1D')">1D</button>
          <button class="btn btn-custom btn-sm time-button" onclick="handleButtonClick(this); updateGraph('5D')">5D</button>
          <button class="btn btn-custom btn-sm time-button" onclick="handleButtonClick(this); updateGraph('1M')">1M</button>
          <button class="btn btn-custom btn-sm time-button" onclick="handleButtonClick(this); updateGraph('6M')">6M</button>
          <button class="btn btn-custom btn-sm time-button" onclick="handleButtonClick(this); updateGraph('1Y')">1Y</button>
        </div>
      </div>
    </div>

  

  <div class="container3">
    <!-- Your table structure -->
    <table class="table table-bordered custom-table table-fixed-width">
      <tbody>
        <tr>
          <td>Open</td>
          <td>null</td>
          <td>CDP score</td>
          <td>null</td>
        </tr>
        <tr>
          <td>High</td>
          <td>null</td>
          <td>52-wk high</td>
          <td>null</td>
        </tr>
        <tr>
          <td>Low</td>
          <td>null</td>
          <td>52-wk low</td>
          <td>null</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Bottom right section with scrolling -->
<div class="article-section">
  <h3>Articles</h3>
  <ul id="article-list">
      <!-- Existing list items here -->
  </ul>
  </div>
</div>
  <!-- Script for the Historic 12-Month Run graph -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <script>

  </script>


<script>
  function handleButtonClick(button) {
    // Check if the button is a time-button
    if (button.classList.contains('time-button')) {
      // Get all buttons with the class 'time-button'
      const timeButtons = document.querySelectorAll('.time-button');
      // Loop through each time button and remove the 'active' class
      timeButtons.forEach(btn => {
        if (btn !== button) {
          btn.classList.remove('active');
        }
      });
    } else {
      // Get all buttons with the class 'btn-custom'
      const customButtons = document.querySelectorAll('.btn-custom');
      // Loop through each custom button and remove the 'active' class
      customButtons.forEach(btn => {
        if (btn !== button) {
          btn.classList.remove('active');
        }
      });
    }

    // Toggle 'active' class for the clicked button
    button.classList.toggle('active');
  }

  // Function to set the "COST" button as active initially
  function setActiveButton() {
      const costButton = document.querySelector('.btn-custom:nth-child(2)'); // Selects the second button
      handleButtonClick(costButton);
  }

  // Triggering the setActiveButton function after the document has loaded
  document.addEventListener('DOMContentLoaded', setActiveButton);

    // Fetch data from Flask backend (Replace with your server URL)
    const url = 'http://127.0.0.1:5000/Ticker_News'; // Replace with your Flask server URL
    fetch(url)
      .then(response => response.json())
      .then(data => {
        displayArticles(data);
      })
      .catch(error => console.error('Error fetching data:', error));

    // Function to create and display article items with images
    function displayArticles(tickerData) {
      const articleList = document.getElementById('article-list');
      
      // Loop through each entry in the ticker data
      tickerData.forEach(function(entry) {
        // Create list item
        const listItem = document.createElement('li');

        // Create image element
        const img = document.createElement('img');
        img.src = entry.Banner_Image; // Set image source to Banner_Image URL
        img.alt = 'Banner Image'; // Set alt attribute for accessibility
        
        // Append image to list item
        listItem.appendChild(img);

        // Create title element
        const title = document.createElement('h4');
        title.textContent = entry.Title; // Set title text
        
        // Append title to list item
        listItem.appendChild(title);

        // Create summary element
        const summary = document.createElement('p');
        summary.textContent = entry.Summary; // Set summary text
        
        // Append summary to list item
        listItem.appendChild(summary);

        // Create link element
        const link = document.createElement('a');
        link.href = entry.URL; // Set link href to URL
        link.textContent = 'Read more'; // Set link text
        
        // Append link to list items
        listItem.appendChild(link);

        // Append list item to article list
        articleList.appendChild(listItem);
      });
    }
</script>


</body>

</html>